{"componentChunkName":"component---node-modules-gatsby-theme-andy-src-templates-note-js","path":"/dockerize-and-deploy-application-to-heroku","result":{"data":{"brainNote":{"slug":"dockerize-and-deploy-application-to-heroku","title":"Dockerize and Deploy application to Heroku","childMdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Dockerize and Deploy application to Heroku\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"#linux #docker #deployment #heroku #operating\"), mdx(\"p\", null, \"There are various reasons you want to deploy your application as a Docker container on Heroku, one of the reasonable looking one is you want to mess with a language that doesn't officially supported by Heroku yet.\"), mdx(\"p\", null, \"The steps of doing so is simple:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Dockerize your application \\u2014 build it to a Docker image\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Push that Docker image to Heroku\")), mdx(\"p\", null, \"For the sake of simplicity, in this article, I'm showing you how to Dockerize a NodeJS application and deploy it to Heroku, ignoring the fact that NodeJS was supported by Heroku from almost its day-1.\"), mdx(\"h2\", null, \"Dockerize your application\"), mdx(\"p\", null, \"Let's say, you have a really complex NodeJS application, like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \".\\n\\u251C\\u2500\\u2500 index.js\\n\\u2514\\u2500\\u2500 package.json\\n\")), mdx(\"p\", null, \"What we need to do is create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Dockerfile\"), \" file, to define how should we build our Docker image:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"FROM node:10\\nRUN apt-get update\\nWORKDIR /\\nCOPY package*.json ./\\nRUN npm install\\nCOPY . .\\nCMD [\\\"node\\\", \\\"index.js\\\"]\\n\")), mdx(\"p\", null, \"We can now build our Docker image:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"docker build -t <your-name>/<your-app> .\\n\")), mdx(\"p\", null, \"And to make sure it work, you can run it locally:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"docker run --rm -it -e PORT=3000 -p 3000:3000 <your-name>/<your-app>\\n\")), mdx(\"p\", null, \"If everything run well, we're now able to proceed to the next step: Push the Docker image to heroku and deploy our application.\"), mdx(\"h2\", null, \"Deploy to Heroku\"), mdx(\"p\", null, \"First, even if you already logged in to Heroku Command Line tool, you also need to make sure you logged in to Heroku \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Container Registry\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"heroku container:login\\n\")), mdx(\"p\", null, \"Create your application and push the Docker image:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"heroku create <your-app-name>\\nheroku container:push web --app <your-app-name>\\n\")), mdx(\"p\", null, \"Now, it's time to drive to In-N-Out Burger to grab a double-double combo, chocolate shake would be better than coke, don't forget to tell them you don't like onion. You can finish your burger before going back to work because it might take sometimes to push your huge-ass Docker image to Heroku.\"), mdx(\"p\", null, \"By the time you're back, you can now hit the deploy button:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"heroku container:release web --app <your-app-name>\\n\")), mdx(\"p\", null, \"And that's it!\"));\n}\n;\nMDXContent.isMDXComponent = true;"},"inboundReferenceNotes":[{"title":"Home Page","slug":"about","childMdx":{"excerpt":"Welcome! This is my personal notebook. You can take a look at some of the recent articles here: Actix Framework Actor Model Atomic Designâ€¦"}}],"outboundReferenceNotes":[]},"site":{"siteMetadata":{"title":"Huy's Notes"}}},"pageContext":{"slug":"dockerize-and-deploy-application-to-heroku"}},"staticQueryHashes":[]}